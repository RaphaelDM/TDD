### Exercice MOCK-2 : Système de Notifications (Intermédiaire)
**Objectif** : Mocker plusieurs dépendances et tester les interactions

#### Description
Créez un système de notifications multi-canal (email, SMS, push, webhook).

#### Architecture
- `NotificationService` : orchestrateur
- `EmailProvider` : envoi d'emails
- `SMSProvider` : envoi de SMS
- `PushNotificationProvider` : notifications push
- `WebhookProvider` : appels webhook
- `NotificationLogger` : logs des envois
- `UserPreferences` : préférences utilisateur

#### Fonctionnalités
1. Envoyer une notification selon les préférences utilisateur
2. Retry automatique en cas d'échec (3 tentatives)
3. Fallback (si email échoue → SMS)
4. Notifications groupées (batch)
5. Priorité des notifications (urgent, normal, low)
6. Planification différée
7. Logs de tous les envois
8. Statistiques d'envoi

#### Tests avec mocks (minimum 20)
- Mock de chaque provider
- Tester la sélection du bon canal
- Tester le retry automatique
- Tester le fallback
- Vérifier les logs
- Tester les notifications groupées
- Tester avec préférences utilisateur variées
- Tester la gestion des échecs
- Vérifier l'ordre des appels
- Tester les notifications urgentes
- Mock de la base de données des préférences
- Tester avec tous les providers en échec

#### Techniques avancées
- Mock multiple (plusieurs dépendances)
- `mock.side_effect` avec séquence
- `patch.object` et `patch.multiple`
- Spy pattern (vérifier les appels sans tout mocker)
- `assert_has_calls` pour vérifier les séquences